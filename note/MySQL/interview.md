# MySQL



## 存储引擎



**都有哪些存储引擎**



**MyISAM和InnoDB的区别**

* 5.5版本后默认的存储引擎为InnoDB，之前是MyISAM
* 事务：MyISAM不支持事务
* 锁：MyISAM不支持行级锁，只支持表级锁，InnoDB默认行级锁
* 外键：MyISAM不支持外键
* MVCC：仅InnoBD支持，应对高并发事务, MVCC比单纯的加锁更高效;



**什么是MVCC**



**数据库中间件**



**什么是视图，为什么要使用视图，视图的特点**



**视图的使用场景**



**视图的优点**



**什么是存储过程**



**什么是触发器**



**MySQL都有哪些触发器**



**SQL语句的主要分类**



**主键，外键，候选见，超键分别指什么**



**SQL约束**



**六种关联查询**



**int(20)20的含义**



**什么是子查询**



**in和exists的区别**



**varchar和char的区别**



**MySQL与Oracle的区别**

* Oracle收费
* 分页不同，MySQL是limit，Oracle是row
* Oracle没有自动增长类型



**MySql 的存储引擎有哪些**

InnoDB 

* 5.5后默认的存储引擎

* 支持事务
* 支持行级锁
* 不支持全文索引
* 主键索引

MyISAM

* 支持全文索引

* 不支持事务
* 不支持外键
* 不支持表级锁，并发性差

MyISAM适合查询以及插入为主的应用，InnoDB适合频繁修改以及涉及到安全性较高的应用

清空整个表时，InnoDB是一行一行的删除，效率非常慢。MyISAM则会重建表



## 性能优化



**优化步骤是什么**



小表驱动大表





**怎么优化SQL**

* 加索引
* 避免返回不必要的字段
* 
* 适当分批操作
* 分库分表
* 读写分离



**分库分表的设计**



**limit100000分页很慢怎么解决**

* 如果id是连续的，可以通过添加where条件id>100000



**分布式主键设计方案**







**MyISAM与InNoDB索引的区别**



## 索引



组合索引(k1,k2,k3)相当于创建了三个索引(k1),(k1,k2),(k1,k2,k3)



**什么是索引**

就像字典的目录，可以根据拼音和笔画进行查询。索引就是将所有保存的数据，按照指定的规则进行排序，生成排序字段到存储地址的一个映射。



**索引的优缺点**



**B树和平衡二叉树的区别**



**MySQL索引的数据结构**

B树和B+树



**索引覆盖**

要查询的字段，都在当前使用的索引中，走完索引就不需要回表了。



IO次数就是树的高度



**磁盘页**





**自增的主键会遇到什么问题**





**使用索引一定能提高性能吗**



**索引的分类**

单列索引

* 普通



**和作用，使用场景**



**怎么创建索引**

创建普通索引：`CREATE INDEX (自定义)索引名 ON 数据表(字段);`

创建符合索引：`CREATE INDEX (自定义)索引名 ON 数据表(字段，字段，...);`





**怎么删除索引**

`删除索引：DROP INDEX 索引名;`



**怎么查看查询中用到的索引**

`explain`可以查看可用的索引和实际使用的索引



**主键索引和唯一索引的区别**



**索引的数据结构**



**添加索引的原则**

* 值唯一的添加唯一索引
* 经常排序，分组以及做查询条件的建立索引
* 



**什么情况索引会失效**

* like以%开头
* or语句前后没有同时使用索引
* 没有使用组合索引的第一列索引
* 字符串不加引号，如varchar不加单引号的话可能会自动转换为int型
* 在索引字段上使用not，<>，!=。会扫描全表
* 对索引字段进行计算操作、字段上使用函数
* 在索引列上使用 IS NULL 或 IS NOT NULL操作。索引是不索引空值的，所以这样的操作不能使用索引
* 当全表扫描速度比索引速度快时，mysql会使用全表扫描，此时索引失效



**什么是聚簇索引**

聚簇索引不是索引的一种种类，而是一种存储方式，数据和索引放在一起。

聚簇表示数据行和相邻的键值紧凑的存储在一起。因为无法同时将数据行存储在两个位置，所以一个表只能有一个聚簇索引。



**聚簇索引的优势**

减少IO

* 对范围查询
* 适合排序





**非聚簇索引一定会回表查询吗，非覆盖索引**

非聚簇索引叶子节点不存出数据，如果向获得其他数据，就要再去聚簇索引中拿。



**联合索引是什么，为什么要注意联合索引的顺序**



## 事务



**什么是事务**



**事务的四个特性(ACID)**

* 原子性 将多个操作看成一个操作，要么都成功，要么都失败，失败后回滚，不能对数据库造成影响。
* 一致性 事务前后数据库的完整性约束不会收到破坏
* 隔离性 多个事务间不能相互影响，同一时间只允许一个事务操作同一个数据
* 持久性  事务提交后，接下来的操作或故障不会对持久化的数据造成影响



**什么是赃读幻读不可重读**



**什么是事务的隔离级别，MySQL的默认隔离级别是什么**



**数据库的三大范式**



**什么是MVVC**







## 并发

**百万级别以上的数据如何删除**



**MySQL都有哪些锁**



**隔离级别与锁的关系**



**MySQL的乐观锁悲观锁怎么实现**



## 权限



**MySQL有关权限的表**



**MySQL的binlog有几种录入格式，有什么区别**



**count(*)、count(1)、count(column)的区别**





## 函数





## 数据类型



**Blog和Text的区别**



**记录货币用什么类型好**





**Hash 索引和 B+树索引的区别**







**为什么不都用 Hash 索引而使用 B+树索引**



**B 树和 B+树的区别**



**MySQL 三种锁的级别**



**索引的分类**



**聚集索引和非聚集索引区别**



**主键约束和唯一约束的对比**

唯一，非空，个数，组合列



**TRUNCATE与DELETE的区别**

* TRUNCATE用来清空整张表，效率高
* 自增约束，TRUNCATE从1开始，DELETE继续往后
* TRUNCATE不支持回滚
* TRUNCATE后没有返回值，DELETE后返回受影响的函数



# 索引



* 索引有哪些数据结构
* 哪些字段适合做索引
* 聚合索引和飞聚合索引的区别



所有有哪些数据结构

Hash、B+

* 哈希表，完全平衡二叉树，B,B+

哈希表的特点就是**可以快速的精确查询，但是不支持范围查询**

平衡二叉树浪费磁盘IO，不支持范围查询

B Tree要矮一点，原因是一个节点可以放多个数据

B+ 非叶子节点会冗余一份叶子节点(提高范围查找效率)，叶子节点之间用指针连接



* 红黑树？

**一个B+树的节点中到底存多少个元素最合适**



Mysql的基本存储结构是**页**



B Tree又称为平衡多路查找树



**JDBC使用步骤**



**什么是SQL预编译**

 很多情况下，一条SQL语句可能会反复执行，或者每次执行的时候只有个别的值不同。指的是数据库驱动在发送 sql 语句和参数给 DBMS 之前对 sql 语句进行编译，这样 DBMS 执行 sql 时，就不需要重新编译。 



 **PreparedStatement为什么能在一定程度上防止SQL注入？** 

 在使用参数化查询的情况下，数据库不会将参数的内容视为SQL执行的一部分，而是作为一个字段的属性值来处理，这样就算参数中包含破环性语句（or ‘1=1’）也不会被执行。 





# MyBatis



**什么是MyBatis**



